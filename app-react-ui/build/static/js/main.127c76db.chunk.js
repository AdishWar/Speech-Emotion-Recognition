(this["webpackJsonpapp-react-ui"]=this["webpackJsonpapp-react-ui"]||[]).push([[0],{10:function(e,t,n){e.exports=n(16)},15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(4),i=n.n(c),r=n(2),l=n(1),s=n(5),u=n(6),m=n(9),f=n(8),d=n(7),p=n.n(d),b=(n(17),new p.a({bitRate:128})),h=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).start=function(){a.state.isBlocked?alert("Permission Denied"):b.start().then((function(){a.setState({isRecording:!0})})).catch((function(e){return console.error(e)}))},a.stop=function(){b.stop().getMp3().then((function(e){var t=Object(l.a)(e,2),n=(t[0],t[1]),o=URL.createObjectURL(n);a.setState({blobURL:o,isRecording:!1,blob:n})})).catch((function(e){return console.log(e)})),fetch("/api/send_data",{method:"POST",body:a.state.blob}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))},a.state={isRecording:!1,blob:"",blobURL:"",isBlocked:!1},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;navigator.getUserMedia({audio:!0},(function(){console.log("Permission Granted"),e.setState({isBlocked:!1})}),(function(){console.log("Permission Denied"),e.setState({isBlocked:!0})}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"recorder"},o.a.createElement("h1",{className:"header"},"Speech Emotion Recognition"),o.a.createElement("div",{className:"play-button-parent-div"},o.a.createElement("button",{className:"play-button",onClick:this.state.isRecording?this.stop:this.start},this.state.isRecording?o.a.createElement("i",Object(r.a)({className:"play-button-img"},"className","fa fa-stop")):o.a.createElement("i",Object(r.a)({className:"play-button-img"},"className","fa fa-microphone")))),o.a.createElement("div",{className:"audio-player-div"},o.a.createElement("audio",{className:"audio-player",src:this.state.blobURL,controls:"controls"})))}}]),n}(o.a.Component);function g(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1];return o.a.createElement("div",{className:"select-file-panel"},o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),c(!0);var t=new FormData(e.target);fetch("/api/send_soundfile",{method:"POST",body:t}).then((function(e){console.log(e),c(!1)})).catch((function(e){return console.log("err",e)})),e.target.reset()},className:"select-file-form"},o.a.createElement("input",{type:"file",name:"file",accept:".mp3,.wav"}),o.a.createElement("input",{type:"submit",id:"fetch-button",className:n?"button-fetching":"button-ready",disabled:n,value:n?"Uploading...":"Upload"})))}function v(){var e=Object(a.useState)("Click below"),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),r=Object(l.a)(i,2),s=r[0],u=r[1];return o.a.createElement("div",{className:"output-panel"},o.a.createElement("h1",null,n),o.a.createElement("button",{id:"fetch-button",className:s?"button-fetching":"button-ready",disabled:s,onClick:function(){u(!0),fetch("/api/get_file_format").then((function(e){return e.json()})).then((function(e){var t=e.file_format;"wav"==t&&fetch("/api/data_wav").then((function(e){return e.json()})).then((function(e){c(e.prediction),u(!1)})),"mp3"==t&&fetch("/api/data_mp3").then((function(e){return e.json()})).then((function(e){c(e.prediction),u(!1)})),"no_file"==t&&(c("error: no wav or mp3 files uploaded"),u(!1))})).catch((function(e){return console.log(e)}))}},s?"Fetching...":"Check"))}var E=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(h,null),o.a.createElement("div",{className:"bottom-part"},o.a.createElement(g,null),o.a.createElement(v,null)))};n(15);i.a.render(o.a.createElement(E,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.127c76db.chunk.js.map