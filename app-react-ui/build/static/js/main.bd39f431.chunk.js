(this["webpackJsonpapp-react-ui"]=this["webpackJsonpapp-react-ui"]||[]).push([[0],{10:function(e,t,a){e.exports=a(16)},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(4),i=a.n(o),r=a(2),l=a(1),s=a(5),u=a(6),m=a(9),d=a(8),f=a(7),p=a.n(f),b=(a(17),new p.a({bitRate:128})),h=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).start=function(){n.state.isBlocked?alert("Permission Denied"):b.start().then((function(){n.setState({isRecording:!0})})).catch((function(e){return console.error(e)}))},n.stop=function(){b.stop().getMp3().then((function(e){var t=Object(l.a)(e,2),a=(t[0],t[1]),c=URL.createObjectURL(a);n.setState({blobURL:c,isRecording:!1,blob:a})})).catch((function(e){return console.log(e)})),fetch("/api/send_data",{method:"POST",body:n.state.blob}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))},n.state={isRecording:!1,blob:"",blobURL:"",isBlocked:!1},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;navigator.getUserMedia({audio:!0},(function(){console.log("Permission Granted"),e.setState({isBlocked:!1})}),(function(){console.log("Permission Denied"),e.setState({isBlocked:!0})}))}},{key:"render",value:function(){return c.a.createElement("div",{className:"recorder"},c.a.createElement("h1",{className:"header"},"Speech Emotion Recognition"),c.a.createElement("div",{className:"play-button-parent-div"},c.a.createElement("button",{className:"play-button",onClick:this.state.isRecording?this.stop:this.start},this.state.isRecording?c.a.createElement("i",Object(r.a)({className:"play-button-img"},"className","fa fa-stop")):c.a.createElement("i",Object(r.a)({className:"play-button-img"},"className","fa fa-microphone")))),c.a.createElement("div",{className:"audio-player-div"},c.a.createElement("audio",{className:"audio-player",src:this.state.blobURL,controls:"controls"})))}}]),a}(c.a.Component);function g(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!1),r=Object(l.a)(i,2),s=r[0],u=r[1];return c.a.createElement("div",{className:"select-file-panel"},c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),o(!0),u(!1);var t=new FormData(e.target);fetch("/api/send_soundfile",{method:"POST",body:t}).then((function(t){console.log(t),o(!1),u(!0),e.target.reset()})).catch((function(e){return console.log("err",e)}))},className:"select-file-form"},c.a.createElement("input",{type:"file",name:"file",accept:".mp3,.wav"}),c.a.createElement("input",{type:"submit",id:"fetch-button",className:a?"button-fetching":"button-ready",disabled:a,value:a?"Uploading...":"Upload"})),s?c.a.createElement("div",{className:"file-uploaded-indicator"},"Uploaded ",c.a.createElement("i",{className:"fa fa-check-circle","aria-hidden":"true"})):"")}function v(){var e=Object(n.useState)("Click below"),t=Object(l.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!1),r=Object(l.a)(i,2),s=r[0],u=r[1];return c.a.createElement("div",{className:"output-panel"},c.a.createElement("h1",null,a),c.a.createElement("button",{id:"fetch-button",className:s?"button-fetching":"button-ready",disabled:s,onClick:function(){u(!0),fetch("/api/get_file_format").then((function(e){return e.json()})).then((function(e){var t=e.file_format;"wav"==t&&fetch("/api/data_wav").then((function(e){return e.json()})).then((function(e){o(e.prediction),u(!1)})),"mp3"==t&&fetch("/api/data_mp3").then((function(e){return e.json()})).then((function(e){o(e.prediction),u(!1)})),"no_file"==t&&(o("error: no wav or mp3 files uploaded"),u(!1))})).catch((function(e){return console.log(e)}))}},s?"Fetching...":"Check"))}var E=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(h,null),c.a.createElement("div",{className:"bottom-part"},c.a.createElement(g,null),c.a.createElement(v,null)))};a(15);i.a.render(c.a.createElement(E,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.bd39f431.chunk.js.map